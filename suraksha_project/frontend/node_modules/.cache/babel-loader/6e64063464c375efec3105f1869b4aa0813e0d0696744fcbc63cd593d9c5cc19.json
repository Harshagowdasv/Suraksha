{"ast":null,"code":"import _objectSpread from\"C:/MINIPROJECT STUDENTDROPUT/miniproject7/suraksha_project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/MINIPROJECT STUDENTDROPUT/miniproject7/suraksha_project/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"_id\"];import React,{useEffect,useMemo,useState}from'react';import api from'../api';import{motion}from'framer-motion';import{Link}from'react-router-dom';import AnalyticsDashboard from'../components/AnalyticsDashboard';import StudentInfoCard from'../components/StudentInfoCard';import{Chart as ChartJS,ArcElement,Tooltip,Legend}from'chart.js';import{Pie}from'react-chartjs-2';import'./TeacherDashboard.css';import'../components/StudentInfoCard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend);export default function TeacherDashboard(){var _editItem$attendance,_editItem$cgpa,_editItem$financialSc,_editItem$studyHours,_editItem$previousYea;const[file,setFile]=useState(null);const[result,setResult]=useState('');const[error,setError]=useState('');const[rows,setRows]=useState([]);const[showAnalytics,setShowAnalytics]=useState(false);const[students,setStudents]=useState([]);const[loading,setLoading]=useState(false);const[editItem,setEditItem]=useState(null);// object or null\nconst[viewItem,setViewItem]=useState(null);const[messageItem,setMessageItem]=useState(null);// student for message\nconst[messageText,setMessageText]=useState('');const[bulkMentorEmail,setBulkMentorEmail]=useState('');const onFileChange=e=>{var _e$target$files;setFile(((_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0])||null);setResult('');setError('');setRows([]);};const setMentorForAll=async()=>{try{const body={mentorEmail:bulkMentorEmail};try{await api.put('/api/teacher/students/mentor',body);}catch(e){await api.put('/api/teachers/students/mentor',body);}setResult(\"Mentor set for all: \".concat(bulkMentorEmail));await fetchStudents();}catch(e){var _e$response,_e$response$data;setError((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Failed to set mentor for all');}};const notifyAll=async()=>{try{try{await api.post('/api/teacher/students/notifyAll');}catch(e){await api.post('/api/teachers/students/notifyAll');}setResult('Notified mentors for all students');}catch(e){var _e$response2,_e$response2$data;setError((e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.message)||'Failed to notify all');}};const uploadCSV=async()=>{try{if(!file)return setError('Please choose a CSV file');setError('');const form=new FormData();form.append('file',file);let resp;try{resp=await api.post('/api/teacher/upload',form,{headers:{'Content-Type':'multipart/form-data'}});}catch(e){// fallback to plural mount\nresp=await api.post('/api/teachers/upload',form,{headers:{'Content-Type':'multipart/form-data'}});}setResult(\"Inserted: \".concat(resp.data.inserted));setRows(resp.data.items||[]);await fetchStudents();}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Upload failed');}};const notifyMentor=async studentId=>{try{await api.post(\"/api/mentor/notify/\".concat(studentId));setResult('Mentor has been notified for review.');}catch(err){var _err$response3,_err$response3$data;setError((err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Failed to notify mentor');}};const fetchStudents=async()=>{try{setLoading(true);let res;try{res=await api.get('/api/teacher/students');}catch(e){// fallback to plural mount\nres=await api.get('/api/teachers/students');}setStudents(res.data||[]);}catch(e){var _e$response3,_e$response3$data;setError((e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:_e$response3$data.message)||'Failed to load students');}finally{setLoading(false);}};useEffect(()=>{fetchStudents();},[]);const clearAllStudents=async()=>{if(!window.confirm('Delete ALL students from the database?'))return;try{try{await api.delete('/api/teacher/students');}catch(e){await api.delete('/api/teachers/students');}setResult('All students deleted');setRows([]);await fetchStudents();}catch(e){var _e$response4,_e$response4$data;setError((e===null||e===void 0?void 0:(_e$response4=e.response)===null||_e$response4===void 0?void 0:(_e$response4$data=_e$response4.data)===null||_e$response4$data===void 0?void 0:_e$response4$data.message)||'Failed to delete all students');}};const getRiskLevel=s=>{var _s$attendance,_s$cgpa,_s$financialScore,_s$studyHours,_s$previousYearBacklo;let risk=0;if(((_s$attendance=s.attendance)!==null&&_s$attendance!==void 0?_s$attendance:100)<75)risk+=2;if(((_s$cgpa=s.cgpa)!==null&&_s$cgpa!==void 0?_s$cgpa:10)<6)risk+=2;if(((_s$financialScore=s.financialScore)!==null&&_s$financialScore!==void 0?_s$financialScore:100)<50)risk+=1;if(((_s$studyHours=s.studyHours)!==null&&_s$studyHours!==void 0?_s$studyHours:10)<2)risk+=2;if(((_s$previousYearBacklo=s.previousYearBacklogs)!==null&&_s$previousYearBacklo!==void 0?_s$previousYearBacklo:0)>2)risk+=2;if(risk>=6)return'High';if(risk>=3)return'Moderate';return'Low';};const getRiskColor=level=>{if(level==='High')return'#f87171';if(level==='Moderate')return'#facc15';return'#4ade80';};const riskCounts=useMemo(()=>{const high=students.filter(s=>getRiskLevel(s)==='High').length;const moderate=students.filter(s=>getRiskLevel(s)==='Moderate').length;const low=students.filter(s=>getRiskLevel(s)==='Low').length;return{high,moderate,low};},[students]);const pieData=useMemo(()=>({labels:['High','Moderate','Low'],datasets:[{data:[riskCounts.high,riskCounts.moderate,riskCounts.low],backgroundColor:['#f87171','#facc15','#4ade80'],borderColor:'rgba(255,255,255,0.35)'}]}),[riskCounts]);const handleDelete=async id=>{if(!window.confirm('Delete this student?'))return;try{await api.delete(\"/api/teacher/student/\".concat(id));await fetchStudents();}catch(e){var _e$response5,_e$response5$data;setError((e===null||e===void 0?void 0:(_e$response5=e.response)===null||_e$response5===void 0?void 0:(_e$response5$data=_e$response5.data)===null||_e$response5$data===void 0?void 0:_e$response5$data.message)||'Failed to delete');}};const handleSaveEdit=async()=>{try{const{_id}=editItem,payload=_objectWithoutProperties(editItem,_excluded);const res=await api.put(\"/api/teacher/student/\".concat(_id),payload);setEditItem(null);await fetchStudents();}catch(e){var _e$response6,_e$response6$data;setError((e===null||e===void 0?void 0:(_e$response6=e.response)===null||_e$response6===void 0?void 0:(_e$response6$data=_e$response6.data)===null||_e$response6$data===void 0?void 0:_e$response6$data.message)||'Failed to update');}};const sendIntervention=async(s,text)=>{try{if(!s.mentorEmail)return setError('No mentorEmail set for this student');await api.post('/api/mentor/intervention',{studentEmail:s.email,mentorEmail:s.mentorEmail,message:text});setResult('Intervention sent');}catch(e){var _e$response7,_e$response7$data;setError((e===null||e===void 0?void 0:(_e$response7=e.response)===null||_e$response7===void 0?void 0:(_e$response7$data=_e$response7.data)===null||_e$response7$data===void 0?void 0:_e$response7$data.message)||'Failed to send intervention');}};return/*#__PURE__*/_jsxs(motion.div,{initial:{x:24,opacity:0},animate:{x:0,opacity:1},transition:{duration:0.4},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"Teacher Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"glass-card sidebar\",children:[/*#__PURE__*/_jsxs(Link,{className:\"side-link\",to:\"/teacher\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83C\\uDFE0\"}),\"Home\"]}),/*#__PURE__*/_jsxs(Link,{className:\"side-link\",to:\"/teacher\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCE5\"}),\"Bulk Upload\"]}),/*#__PURE__*/_jsxs(Link,{className:\"side-link\",to:\"/profile\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDC64\"}),\"Profile\"]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Upload CSV of students with columns (example): \",/*#__PURE__*/_jsx(\"b\",{children:\"usn,name,email,phonenumber,parent_phone_number,attendance,cgpa,financial_score,study_hours,previous_year_backlogs\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:onFileChange}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:uploadCSV,children:\"Upload\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",style:{marginLeft:8},onClick:()=>setShowAnalytics(v=>!v),children:showAnalytics?'Hide Insights':'View Insights'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",style:{marginLeft:8},onClick:clearAllStudents,children:\"Clear All Students\"})]}),result&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",style:{marginTop:8},children:result}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",style:{marginTop:8},children:error})]}),showAnalytics&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(AnalyticsDashboard,{})}),rows.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",style:{marginTop:12,overflowX:'auto'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Uploaded Students\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"USN\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"CGPA\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"Attendance\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(s=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderTop:'1px solid rgba(255,255,255,0.12)'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:s.usn}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:s.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:s.email}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:s.cgpa}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:s.attendance}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>notifyMentor(s._id),children:\"Send to Mentor\"})})]},s._id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Overall Class Risk\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:420},children:/*#__PURE__*/_jsx(Pie,{data:pieData})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",style:{marginTop:12,overflowX:'auto'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"All Students\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-row\",style:{marginBottom:10},children:[/*#__PURE__*/_jsx(\"input\",{style:{minWidth:260},placeholder:\"Set mentor email for all\",value:bulkMentorEmail,onChange:e=>setBulkMentorEmail(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:setMentorForAll,children:\"Set Mentor\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:notifyAll,children:\"Send All to Mentor\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"student-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"USN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Attendance\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CGPA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Risk\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students.map(s=>{const level=getRiskLevel(s);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.name}),/*#__PURE__*/_jsx(\"td\",{children:s.email}),/*#__PURE__*/_jsx(\"td\",{children:s.usn}),/*#__PURE__*/_jsx(\"td\",{children:s.attendance}),/*#__PURE__*/_jsx(\"td\",{children:s.cgpa}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{background:getRiskColor(level)},children:level})}),/*#__PURE__*/_jsxs(\"td\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{title:\"Edit\",onClick:()=>setEditItem(_objectSpread({},s)),children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Delete\",onClick:()=>handleDelete(s._id),children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Intervention\",onClick:()=>setMessageItem(s),children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Message\",onClick:()=>{setMessageItem(s);setMessageText('');},children:\"\\uD83D\\uDCE9\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Info\",onClick:()=>setViewItem(s),children:\"\\uD83D\\uDCD8\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Marks\",onClick:()=>alert('Marks module in progress'),children:\"\\uD83D\\uDCC8\"})]})]},s._id);})})]})]}),editItem&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:()=>setEditItem(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal glass-card\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Edit Student\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:editItem.name||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{name:e.target.value})),placeholder:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{value:editItem.email||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{email:e.target.value})),placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:editItem.usn||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{usn:e.target.value})),placeholder:\"USN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editItem$attendance=editItem.attendance)!==null&&_editItem$attendance!==void 0?_editItem$attendance:'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{attendance:Number(e.target.value)})),placeholder:\"Attendance\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editItem$cgpa=editItem.cgpa)!==null&&_editItem$cgpa!==void 0?_editItem$cgpa:'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{cgpa:Number(e.target.value)})),placeholder:\"CGPA\"}),/*#__PURE__*/_jsx(\"input\",{value:editItem.parentPhone||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{parentPhone:e.target.value})),placeholder:\"Parent Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editItem$financialSc=editItem.financialScore)!==null&&_editItem$financialSc!==void 0?_editItem$financialSc:'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{financialScore:Number(e.target.value)})),placeholder:\"Financial Score\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editItem$studyHours=editItem.studyHours)!==null&&_editItem$studyHours!==void 0?_editItem$studyHours:'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{studyHours:Number(e.target.value)})),placeholder:\"Study Hours\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editItem$previousYea=editItem.previousYearBacklogs)!==null&&_editItem$previousYea!==void 0?_editItem$previousYea:'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{previousYearBacklogs:Number(e.target.value)})),placeholder:\"Prev Year Backlogs\"}),/*#__PURE__*/_jsx(\"input\",{value:editItem.mentorEmail||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{mentorEmail:e.target.value})),placeholder:\"Mentor Email\"}),/*#__PURE__*/_jsx(\"input\",{value:editItem.classTeacherEmail||'',onChange:e=>setEditItem(_objectSpread(_objectSpread({},editItem),{},{classTeacherEmail:e.target.value})),placeholder:\"Class Teacher Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleSaveEdit,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setEditItem(null),children:\"Cancel\"})]})]})}),viewItem&&/*#__PURE__*/_jsx(StudentInfoCard,{student:viewItem,onClose:()=>setViewItem(null)}),messageItem&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:()=>setMessageItem(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal glass-card\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Send Intervention/Message\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:-6},children:[\"To: \",messageItem.name,\" (\",messageItem.email,\")\"]}),/*#__PURE__*/_jsx(\"textarea\",{rows:4,placeholder:\"Write a message...\",value:messageText,onChange:e=>setMessageText(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:async()=>{await sendIntervention(messageItem,messageText);setMessageItem(null);setMessageText('');},children:\"Send\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setMessageItem(null),children:\"Cancel\"})]})]})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","api","motion","Link","AnalyticsDashboard","StudentInfoCard","Chart","ChartJS","ArcElement","Tooltip","Legend","Pie","jsx","_jsx","jsxs","_jsxs","register","TeacherDashboard","_editItem$attendance","_editItem$cgpa","_editItem$financialSc","_editItem$studyHours","_editItem$previousYea","file","setFile","result","setResult","error","setError","rows","setRows","showAnalytics","setShowAnalytics","students","setStudents","loading","setLoading","editItem","setEditItem","viewItem","setViewItem","messageItem","setMessageItem","messageText","setMessageText","bulkMentorEmail","setBulkMentorEmail","onFileChange","e","_e$target$files","target","files","setMentorForAll","body","mentorEmail","put","concat","fetchStudents","_e$response","_e$response$data","response","data","message","notifyAll","post","_e$response2","_e$response2$data","uploadCSV","form","FormData","append","resp","headers","inserted","items","err","_err$response","_err$response$data","_err$response2","_err$response2$data","notifyMentor","studentId","_err$response3","_err$response3$data","res","get","_e$response3","_e$response3$data","clearAllStudents","window","confirm","delete","_e$response4","_e$response4$data","getRiskLevel","s","_s$attendance","_s$cgpa","_s$financialScore","_s$studyHours","_s$previousYearBacklo","risk","attendance","cgpa","financialScore","studyHours","previousYearBacklogs","getRiskColor","level","riskCounts","high","filter","length","moderate","low","pieData","labels","datasets","backgroundColor","borderColor","handleDelete","id","_e$response5","_e$response5$data","handleSaveEdit","_id","payload","_objectWithoutProperties","_excluded","_e$response6","_e$response6$data","sendIntervention","text","studentEmail","email","_e$response7","_e$response7$data","div","initial","x","opacity","animate","transition","duration","children","style","marginTop","className","to","type","accept","onChange","onClick","marginLeft","v","overflowX","width","borderCollapse","textAlign","padding","map","borderTop","usn","name","maxWidth","marginBottom","minWidth","placeholder","value","background","title","_objectSpread","alert","stopPropagation","Number","parentPhone","classTeacherEmail","display","gap","student","onClose"],"sources":["C:/MINIPROJECT STUDENTDROPUT/miniproject7/suraksha_project/frontend/src/pages/TeacherDashboard.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport api from '../api';\nimport { motion } from 'framer-motion';\nimport { Link } from 'react-router-dom';\nimport AnalyticsDashboard from '../components/AnalyticsDashboard';\nimport StudentInfoCard from '../components/StudentInfoCard';\nimport {\n  Chart as ChartJS,\n  ArcElement,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Pie } from 'react-chartjs-2';\nimport './TeacherDashboard.css';\nimport '../components/StudentInfoCard.css';\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\nexport default function TeacherDashboard() {\n  const [file, setFile] = useState(null);\n  const [result, setResult] = useState('');\n  const [error, setError] = useState('');\n  const [rows, setRows] = useState([]);\n  const [showAnalytics, setShowAnalytics] = useState(false);\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [editItem, setEditItem] = useState(null); // object or null\n  const [viewItem, setViewItem] = useState(null);\n  const [messageItem, setMessageItem] = useState(null); // student for message\n  const [messageText, setMessageText] = useState('');\n  const [bulkMentorEmail, setBulkMentorEmail] = useState('');\n\n  const onFileChange = (e) => {\n    setFile(e.target.files?.[0] || null);\n    setResult('');\n    setError('');\n    setRows([]);\n  };\n\n  const setMentorForAll = async () => {\n    try {\n      const body = { mentorEmail: bulkMentorEmail };\n      try {\n        await api.put('/api/teacher/students/mentor', body);\n      } catch (e) {\n        await api.put('/api/teachers/students/mentor', body);\n      }\n      setResult(`Mentor set for all: ${bulkMentorEmail}`);\n      await fetchStudents();\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to set mentor for all');\n    }\n  };\n\n  const notifyAll = async () => {\n    try {\n      try {\n        await api.post('/api/teacher/students/notifyAll');\n      } catch (e) {\n        await api.post('/api/teachers/students/notifyAll');\n      }\n      setResult('Notified mentors for all students');\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to notify all');\n    }\n  };\n\n  const uploadCSV = async () => {\n    try {\n      if (!file) return setError('Please choose a CSV file');\n      setError('');\n      const form = new FormData();\n      form.append('file', file);\n      let resp;\n      try {\n        resp = await api.post('/api/teacher/upload', form, { headers: { 'Content-Type': 'multipart/form-data' } });\n      } catch (e) {\n        // fallback to plural mount\n        resp = await api.post('/api/teachers/upload', form, { headers: { 'Content-Type': 'multipart/form-data' } });\n      }\n      setResult(`Inserted: ${resp.data.inserted}`);\n      setRows(resp.data.items || []);\n      await fetchStudents();\n    } catch (err) {\n      setError(err?.response?.data?.message || err?.response?.data?.error || 'Upload failed');\n    }\n  };\n\n  const notifyMentor = async (studentId) => {\n    try {\n      await api.post(`/api/mentor/notify/${studentId}`);\n      setResult('Mentor has been notified for review.');\n    } catch (err) {\n      setError(err?.response?.data?.message || 'Failed to notify mentor');\n    }\n  };\n\n  const fetchStudents = async () => {\n    try {\n      setLoading(true);\n      let res;\n      try {\n        res = await api.get('/api/teacher/students');\n      } catch (e) {\n        // fallback to plural mount\n        res = await api.get('/api/teachers/students');\n      }\n      setStudents(res.data || []);\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to load students');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { fetchStudents(); }, []);\n\n  const clearAllStudents = async () => {\n    if (!window.confirm('Delete ALL students from the database?')) return;\n    try {\n      try {\n        await api.delete('/api/teacher/students');\n      } catch (e) {\n        await api.delete('/api/teachers/students');\n      }\n      setResult('All students deleted');\n      setRows([]);\n      await fetchStudents();\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to delete all students');\n    }\n  };\n\n  const getRiskLevel = (s) => {\n    let risk = 0;\n    if ((s.attendance ?? 100) < 75) risk += 2;\n    if ((s.cgpa ?? 10) < 6) risk += 2;\n    if ((s.financialScore ?? 100) < 50) risk += 1;\n    if ((s.studyHours ?? 10) < 2) risk += 2;\n    if ((s.previousYearBacklogs ?? 0) > 2) risk += 2;\n    if (risk >= 6) return 'High';\n    if (risk >= 3) return 'Moderate';\n    return 'Low';\n  };\n\n  const getRiskColor = (level) => {\n    if (level === 'High') return '#f87171';\n    if (level === 'Moderate') return '#facc15';\n    return '#4ade80';\n  };\n\n  const riskCounts = useMemo(() => {\n    const high = students.filter((s) => getRiskLevel(s) === 'High').length;\n    const moderate = students.filter((s) => getRiskLevel(s) === 'Moderate').length;\n    const low = students.filter((s) => getRiskLevel(s) === 'Low').length;\n    return { high, moderate, low };\n  }, [students]);\n\n  const pieData = useMemo(() => ({\n    labels: ['High', 'Moderate', 'Low'],\n    datasets: [{ data: [riskCounts.high, riskCounts.moderate, riskCounts.low], backgroundColor: ['#f87171', '#facc15', '#4ade80'], borderColor: 'rgba(255,255,255,0.35)' }]\n  }), [riskCounts]);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm('Delete this student?')) return;\n    try {\n      await api.delete(`/api/teacher/student/${id}`);\n      await fetchStudents();\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to delete');\n    }\n  };\n\n  const handleSaveEdit = async () => {\n    try {\n      const { _id, ...payload } = editItem;\n      const res = await api.put(`/api/teacher/student/${_id}`, payload);\n      setEditItem(null);\n      await fetchStudents();\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to update');\n    }\n  };\n\n  const sendIntervention = async (s, text) => {\n    try {\n      if (!s.mentorEmail) return setError('No mentorEmail set for this student');\n      await api.post('/api/mentor/intervention', { studentEmail: s.email, mentorEmail: s.mentorEmail, message: text });\n      setResult('Intervention sent');\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to send intervention');\n    }\n  };\n\n  return (\n    <motion.div initial={{ x: 24, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ duration: 0.4 }}>\n      <h3 style={{ marginTop: 0 }}>Teacher Dashboard</h3>\n      <div className=\"dashboard-layout\">\n        <aside className=\"glass-card sidebar\">\n          <Link className=\"side-link\" to=\"/teacher\"><span className=\"icon\">üè†</span>Home</Link>\n          <Link className=\"side-link\" to=\"/teacher\"><span className=\"icon\">üì•</span>Bulk Upload</Link>\n          <Link className=\"side-link\" to=\"/profile\"><span className=\"icon\">üë§</span>Profile</Link>\n        </aside>\n        <section>\n          <div className=\"glass-card\">\n            <p>Upload CSV of students with columns (example): <b>usn,name,email,phonenumber,parent_phone_number,attendance,cgpa,financial_score,study_hours,previous_year_backlogs</b></p>\n            <input type=\"file\" accept=\".csv\" onChange={onFileChange} />\n            <div style={{ marginTop: 8 }}>\n              <button className=\"btn\" onClick={uploadCSV}>Upload</button>\n              <button className=\"btn\" style={{ marginLeft: 8 }} onClick={() => setShowAnalytics((v) => !v)}>\n                {showAnalytics ? 'Hide Insights' : 'View Insights'}\n              </button>\n              <button className=\"btn\" style={{ marginLeft: 8 }} onClick={clearAllStudents}>\n                Clear All Students\n              </button>\n            </div>\n            {result && <p className=\"success\" style={{ marginTop: 8 }}>{result}</p>}\n            {error && <p className=\"error\" style={{ marginTop: 8 }}>{error}</p>}\n          </div>\n\n          {showAnalytics && (\n            <div style={{ marginTop: 12 }}>\n              <AnalyticsDashboard />\n            </div>\n          )}\n\n          {rows.length > 0 && (\n            <div className=\"glass-card\" style={{ marginTop: 12, overflowX: 'auto' }}>\n              <h4 style={{ marginTop: 0 }}>Uploaded Students</h4>\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                <thead>\n                  <tr>\n                    <th style={{ textAlign: 'left', padding: 8 }}>USN</th>\n                    <th style={{ textAlign: 'left', padding: 8 }}>Name</th>\n                    <th style={{ textAlign: 'left', padding: 8 }}>Email</th>\n                    <th style={{ textAlign: 'left', padding: 8 }}>CGPA</th>\n                    <th style={{ textAlign: 'left', padding: 8 }}>Attendance</th>\n                    <th style={{ textAlign: 'left', padding: 8 }}>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {rows.map((s) => (\n                    <tr key={s._id} style={{ borderTop: '1px solid rgba(255,255,255,0.12)' }}>\n                      <td style={{ padding: 8 }}>{s.usn}</td>\n                      <td style={{ padding: 8 }}>{s.name}</td>\n                      <td style={{ padding: 8 }}>{s.email}</td>\n                      <td style={{ padding: 8 }}>{s.cgpa}</td>\n                      <td style={{ padding: 8 }}>{s.attendance}</td>\n                      <td style={{ padding: 8 }}>\n                        <button className=\"btn\" onClick={() => notifyMentor(s._id)}>Send to Mentor</button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          <div className=\"glass-card\" style={{ marginTop: 12 }}>\n            <h4 style={{ marginTop: 0 }}>Overall Class Risk</h4>\n            <div style={{ maxWidth: 420 }}>\n              <Pie data={pieData} />\n            </div>\n          </div>\n\n          <div className=\"glass-card\" style={{ marginTop: 12, overflowX: 'auto' }}>\n            <h4 style={{ marginTop: 0 }}>All Students</h4>\n            <div className=\"toggle-row\" style={{ marginBottom: 10 }}>\n              <input style={{ minWidth: 260 }} placeholder=\"Set mentor email for all\" value={bulkMentorEmail} onChange={(e) => setBulkMentorEmail(e.target.value)} />\n              <button className=\"btn\" onClick={setMentorForAll}>Set Mentor</button>\n              <button className=\"btn\" onClick={notifyAll}>Send All to Mentor</button>\n            </div>\n            {loading ? (\n              <div className=\"spinner\" />\n            ) : (\n              <table className=\"student-table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Email</th>\n                    <th>USN</th>\n                    <th>Attendance</th>\n                    <th>CGPA</th>\n                    <th>Risk</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {students.map((s) => {\n                    const level = getRiskLevel(s);\n                    return (\n                      <tr key={s._id}>\n                        <td>{s.name}</td>\n                        <td>{s.email}</td>\n                        <td>{s.usn}</td>\n                        <td>{s.attendance}</td>\n                        <td>{s.cgpa}</td>\n                        <td>\n                          <span className=\"badge\" style={{ background: getRiskColor(level) }}>{level}</span>\n                        </td>\n                        <td className=\"actions\">\n                          <button title=\"Edit\" onClick={() => setEditItem({ ...s })}>‚úèÔ∏è</button>\n                          <button title=\"Delete\" onClick={() => handleDelete(s._id)}>üóëÔ∏è</button>\n                          <button title=\"Intervention\" onClick={() => setMessageItem(s)}>üí¨</button>\n                          <button title=\"Message\" onClick={() => { setMessageItem(s); setMessageText(''); }}>üì©</button>\n                          <button title=\"Info\" onClick={() => setViewItem(s)}>üìò</button>\n                          <button title=\"Marks\" onClick={() => alert('Marks module in progress')}>üìà</button>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          {editItem && (\n            <div className=\"modal-backdrop\" onClick={() => setEditItem(null)}>\n              <div className=\"modal glass-card\" onClick={(e) => e.stopPropagation()}>\n                <h4 style={{ marginTop: 0 }}>Edit Student</h4>\n                <div className=\"grid-2\">\n                  <input value={editItem.name || ''} onChange={(e) => setEditItem({ ...editItem, name: e.target.value })} placeholder=\"Name\" />\n                  <input value={editItem.email || ''} onChange={(e) => setEditItem({ ...editItem, email: e.target.value })} placeholder=\"Email\" />\n                  <input value={editItem.usn || ''} onChange={(e) => setEditItem({ ...editItem, usn: e.target.value })} placeholder=\"USN\" />\n                  <input type=\"number\" value={editItem.attendance ?? ''} onChange={(e) => setEditItem({ ...editItem, attendance: Number(e.target.value) })} placeholder=\"Attendance\" />\n                  <input type=\"number\" value={editItem.cgpa ?? ''} onChange={(e) => setEditItem({ ...editItem, cgpa: Number(e.target.value) })} placeholder=\"CGPA\" />\n                  <input value={editItem.parentPhone || ''} onChange={(e) => setEditItem({ ...editItem, parentPhone: e.target.value })} placeholder=\"Parent Phone\" />\n                  <input type=\"number\" value={editItem.financialScore ?? ''} onChange={(e) => setEditItem({ ...editItem, financialScore: Number(e.target.value) })} placeholder=\"Financial Score\" />\n                  <input type=\"number\" value={editItem.studyHours ?? ''} onChange={(e) => setEditItem({ ...editItem, studyHours: Number(e.target.value) })} placeholder=\"Study Hours\" />\n                  <input type=\"number\" value={editItem.previousYearBacklogs ?? ''} onChange={(e) => setEditItem({ ...editItem, previousYearBacklogs: Number(e.target.value) })} placeholder=\"Prev Year Backlogs\" />\n                  <input value={editItem.mentorEmail || ''} onChange={(e) => setEditItem({ ...editItem, mentorEmail: e.target.value })} placeholder=\"Mentor Email\" />\n                  <input value={editItem.classTeacherEmail || ''} onChange={(e) => setEditItem({ ...editItem, classTeacherEmail: e.target.value })} placeholder=\"Class Teacher Email\" />\n                </div>\n                <div style={{ marginTop: 12, display: 'flex', gap: 8 }}>\n                  <button className=\"btn\" onClick={handleSaveEdit}>Save</button>\n                  <button className=\"btn\" onClick={() => setEditItem(null)}>Cancel</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {viewItem && (\n            <StudentInfoCard \n              student={viewItem} \n              onClose={() => setViewItem(null)} \n            />\n          )}\n\n          {messageItem && (\n            <div className=\"modal-backdrop\" onClick={() => setMessageItem(null)}>\n              <div className=\"modal glass-card\" onClick={(e) => e.stopPropagation()}>\n                <h4 style={{ marginTop: 0 }}>Send Intervention/Message</h4>\n                <p style={{ marginTop: -6 }}>To: {messageItem.name} ({messageItem.email})</p>\n                <textarea rows={4} placeholder=\"Write a message...\" value={messageText} onChange={(e) => setMessageText(e.target.value)} />\n                <div style={{ marginTop: 12, display: 'flex', gap: 8 }}>\n                  <button className=\"btn\" onClick={async () => { await sendIntervention(messageItem, messageText); setMessageItem(null); setMessageText(''); }}>Send</button>\n                  <button className=\"btn\" onClick={() => setMessageItem(null)}>Cancel</button>\n                </div>\n              </div>\n            </div>\n          )}\n        </section>\n      </div>\n    </motion.div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}