{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Users(){const[users,setUsers]=useState([]);const[name,setName]=useState('');const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const fetchUsers=async()=>{setLoading(true);setError('');try{const res=await api.get('/api/users');setUsers(res.data.data||[]);}catch(err){setError('Failed to load users');}finally{setLoading(false);}};useEffect(()=>{fetchUsers();},[]);const onSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(!name||!email){setError('Name and email are required');return;}try{const res=await api.post('/api/users',{name,email});setSuccess('User created');setName('');setEmail('');setUsers(prev=>[res.data.data,...prev]);}catch(err){var _err$response,_err$response$data;const msg=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to create user';setError(msg);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:success})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):users.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No users yet\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:users.map(u=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:u.name}),/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:u.email})]},u._id))})})]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Users","users","setUsers","name","setName","email","setEmail","loading","setLoading","error","setError","success","setSuccess","fetchUsers","res","get","data","err","onSubmit","e","preventDefault","post","prev","_err$response","_err$response$data","msg","response","message","children","className","type","placeholder","value","onChange","target","length","map","u","_id"],"sources":["C:/MINIPROJECT STUDENTDROPUT/miniproject7/suraksha_project/frontend/src/pages/Users.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../api';\n\nexport default function Users() {\n  const [users, setUsers] = useState([]);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const fetchUsers = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const res = await api.get('/api/users');\n      setUsers(res.data.data || []);\n    } catch (err) {\n      setError('Failed to load users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!name || !email) {\n      setError('Name and email are required');\n      return;\n    }\n    try {\n      const res = await api.post('/api/users', { name, email });\n      setSuccess('User created');\n      setName('');\n      setEmail('');\n      setUsers((prev) => [res.data.data, ...prev]);\n    } catch (err) {\n      const msg = err?.response?.data?.message || 'Failed to create user';\n      setError(msg);\n    }\n  };\n\n  return (\n    <div>\n      <h3>Users</h3>\n\n      <form onSubmit={onSubmit} className=\"card\">\n        <div className=\"form-row\">\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <button type=\"submit\">Add</button>\n        </div>\n        {error && <p className=\"error\">{error}</p>}\n        {success && <p className=\"success\">{success}</p>}\n      </form>\n\n      <div className=\"card\">\n        {loading ? (\n          <p>Loading...</p>\n        ) : users.length === 0 ? (\n          <p>No users yet</p>\n        ) : (\n          <ul className=\"list\">\n            {users.map((u) => (\n              <li key={u._id} className=\"list-item\">\n                <span>{u.name}</span>\n                <span className=\"muted\">{u.email}</span>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}